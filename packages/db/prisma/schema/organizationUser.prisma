// ============================================================================
// ORGANIZATION USER - Join table for org membership
// ============================================================================

model OrganizationUser {
  id             String           @id @default(dbgenerated("uuidv7()")) @db.VarChar(36)
  organizationId String           @db.VarChar(36)
  userId         String           @db.VarChar(36)
  role           OrganizationRole @default(member)
  entitlements   Json?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt

  // Relations
  organization Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  user         User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  tokens       Token[]

  @@unique([organizationId, userId])
  @@index([userId])
  @@index([organizationId])
}

enum OrganizationRole {
  owner
  admin
  member
  viewer
}
